---
id: story-3.1
title: "Backend Importance-Ranking Logic"
---

### Status
- [ ] Draft
- [x] Approved
- [ ] In Progress
- [ ] Review
- [ ] Done

### Story
**As a** developer,
**I want** the backend service to analyze each news item and assign an 'importance level',
**so that** this information can be used to visually distinguish articles in the UI.

### Acceptance Criteria
1.  The backend service defines at least three importance levels (e.g., Normal, High, Critical).
2.  The logic for assigning an importance level is implemented based on rules such as "Breaking News" status, keyword matching, or source reputation.
3.  The API response for each news item now includes an `importanceLevel` field.

### Tasks / Subtasks
- [ ] **Task 1: Update Data Model** (AC: 3)
    - [ ] Modify the `NewsItem` interface in `packages/shared-types` to include the `importanceLevel` field. [Source: docs/architecture/4-data-models.md]
- [ ] **Task 2: Implement Importance Ranking Logic** (AC: 1, 2)
    - [ ] In the `apps/api/src/_lib/news`, create a new function `calculateImportance(newsItem)` that takes a news item and returns an importance level.
    - [ ] The function should implement the ranking logic based on keywords, source, etc. [Source: docs/architecture/11-backend-architecture.md]
- [ ] **Task 3: Integrate into News Fetching** (AC: 3)
    - [ ] Modify the `GET /api/news` endpoint to call `calculateImportance` for each news item.
    - [ ] Ensure the `importanceLevel` is included in the API response. [Source: docs/architecture/5-api-specification.md]
- [ ] **Task 4: Unit Tests**
    - [ ] Write unit tests for the `calculateImportance` function using Vitest. [Source: docs/architecture/16-testing-strategy.md]

### Dev Notes
- **Data Models:** The `NewsItem` interface needs to be updated to include the `importanceLevel` field. [Source: docs/architecture/4-data-models.md]
- **Backend Architecture:** The importance ranking logic should be encapsulated in a new function within the `_lib` directory of the API service. [Source: docs/architecture/11-backend-architecture.md]
- **API Specification:** The `GET /news` endpoint should be modified to include the new `importanceLevel` field in its response. [Source: docs/architecture/5-api-specification.md]
- **Testing:** Unit tests for the new logic should be written using Vitest. [Source: docs/architecture/16-testing-strategy.md]
- **Coding Standards:** Ensure all new code adheres to the established coding standards. [Source: docs/architecture/17-coding-standards.md]

### Change Log
| Date | Version | Description | Author |
| --- | --- | --- | --- |
| 2025-08-09 | 1.0 | Initial draft | Bob |

### Dev Agent Record
#### Agent Model Used
{{agent_model_name_version}}
#### Debug Log References
-
#### Completion Notes List
-
#### File List
-

### QA Results
-
